const{extractMessageContent,getDevice,jidNormalizedUser,proto,delay,getContentType,areJidsSameUser,generateWAMessage}=require("@kagenoureal/baileys"),fs=require("fs-extra");
exports.runtime=function(s){s=Number(s);const d=Math.floor(s/86400),h=Math.floor(s%86400/3600),m=Math.floor(s%3600/60);return`${d>0?`${d} hari `:""}${h>0?`${h} jam`:""}${m>0?`${m} menit`:""}`.trim()};
exports.smsg=(c,m,s)=>{if(!m)return m;let M=proto.WebMessageInfo;if(m.key){m.id=m.key.id,m.from=m.key.remoteJid.startsWith("status")?jidNormalizedUser(m.key?.participant||m.participant):jidNormalizedUser(m.key.remoteJid),m.isBaileys=m.id.startsWith("BAE5")&&16===m.id.length,m.chat=m.key.remoteJid,m.fromMe=m.key.fromMe,m.isGroup=m.chat.endsWith("@g.us"),m.sender=c.decodeJid(m.fromMe&&c.user.id||m.participant||m.key.participant||m.chat||""),m.isGroup&&(m.participant=c.decodeJid(m.key.participant)||"")}if(m.message){m.mtype=getContentType(m.message),m.msg=("viewOnceMessage"===m.mtype?m.message[m.mtype]?.message?.[getContentType(m.message[m.mtype]?.message)]:m.message[m.mtype])||{},m.body=(m.mtype==="conversation"?m.message.conversation:m.mtype==="imageMessage"?m.message.imageMessage.caption:m.mtype==="videoMessage"?m.message.videoMessage.caption:m.mtype==="extendedTextMessage"?m.message.extendedTextMessage.text:m.mtype==="buttonsResponseMessage"?m.message.buttonsResponseMessage.selectedButtonId:m.mtype==="listResponseMessage"?m.message.listResponseMessage.singleSelectReply.selectedRowId:m.mtype==="interactiveResponseMessage"?JSON.parse(m.message.interactiveResponseMessage.nativeFlowResponseMessage.paramsJson).id:m.mtype==="templateButtonReplyMessage"?m.message.templateButtonReplyMessage.selectedId:m.mtype==="messageContextInfo"?m.message.buttonsResponseMessage?.selectedButtonId||m.message.listResponseMessage?.singleSelectReply.selectedRowId||m.message.InteractiveResponseMessage.NativeFlowResponseMessage||m.text:"");let q=m.quoted=m.msg?.contextInfo?.quotedMessage||null;m.mentionedJid=m.msg?.contextInfo?.mentionedJid||[];if(q){let t=getContentType(q);m.quoted=q?.[t]||{},"productMessage"===t&&(t=getContentType(m.quoted),m.quoted=m.quoted?.[t]||{}),"string"==typeof m.quoted&&(m.quoted={text:m.quoted}),m.quoted.key={remoteJid:m.msg?.contextInfo?.remoteJid||m.chat||"",participant:jidNormalizedUser(m.msg?.contextInfo?.participant||m.sender||""),fromMe:areJidsSameUser(jidNormalizedUser(m.msg?.contextInfo?.participant||m.sender||""),jidNormalizedUser(c?.user?.id||"")),id:m.msg?.contextInfo?.stanzaId||""},m.quoted.mtype=t,m.quoted.from=/g\.us|status/.test(m.msg?.contextInfo?.remoteJid||"")?m.quoted.key.participant:m.quoted.key.remoteJid,m.quoted.id=m.msg?.contextInfo?.stanzaId||"",m.quoted.chat=m.msg?.contextInfo?.remoteJid||m.chat||"",m.quoted.isBaileys=m.quoted.id?m.quoted.id.startsWith("BAE5")&&16===m.quoted.id.length:!1,m.quoted.sender=c.decodeJid(m.msg?.contextInfo?.participant||""),m.quoted.fromMe=m.quoted.sender===(c.user?.id),m.quoted.text=m.quoted.text||m.quoted.caption||m.quoted.conversation||m.quoted.contentText||m.quoted.selectedDisplayText||m.quoted.title||"",m.quoted.mentionedJid=m.msg?.contextInfo?.mentionedJid||[],m.getQuotedObj=m.getQuotedMessage=async()=>{if(!m.quoted.id)return!1;let o=await s.loadMessage(m.chat,m.quoted.id,c);return exports.smsg(c,o,s)};let vM=m.quoted.fakeObj=M.fromObject({key:{remoteJid:m.quoted.chat,fromMe:m.quoted.fromMe,id:m.quoted.id},message:q,...(m.isGroup?{participant:m.quoted.sender}:{})});m.quoted.delete=()=>c.sendMessage(m.quoted.chat,{delete:vM.key}),m.quoted.copyNForward=(j,f=!1,o={})=>c.copyNForward(j,vM,f,o),m.quoted.download=()=>c.downloadMediaMessage(m.quoted)}}m.msg.url&&(m.download=()=>c.downloadMediaMessage(m.msg)),m.text=m.msg.text||m.msg.caption||m.message.conversation||m.msg.contentText||m.msg.selectedDisplayText||m.msg.title||"",m.reply=(t,j=m.chat,o={})=>Buffer.isBuffer(t)?c.sendMedia(j,t,"file","",m,{...o}):c.sendText(j,t,m,{...o}),m.copy=()=>exports.smsg(c,M.fromObject(M.toObject(m))),m.copyNForward=(j=m.chat,f=!1,o={})=>c.copyNForward(j,m,f,o);return m};